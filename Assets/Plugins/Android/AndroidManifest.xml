<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:tools="http://schemas.android.com/tools"
          package="com.unity3d.player">

    <application>

        <!-- ✅ Главное Activity — Unity -->
        <activity
                android:name="com.unity3d.player.UnityPlayerActivity"
                android:theme="@style/UnityThemeSelector"
                android:launchMode="singleTask"
                android:exported="true">

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

        </activity>

        <!-- ✅ RuStore Pay Activity (без LAUNCHER!) -->
        <activity
                android:name="ru.rustore.unitysdk.RuStoreUnityPayActivity"
                android:theme="@style/UnityThemeSelector"
                android:launchMode="singleTop"
                android:exported="true">

            <!-- Deeplink для RuStore -->
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />
                <data android:scheme="@string/rustore_PayClientSettings_deeplinkScheme" />
            </intent-filter>

            <meta-data android:name="unityplayer.UnityActivity" android:value="true" />
        </activity>

        <!-- ✅ Настройки RuStore -->
        <meta-data android:name="console_app_id_value"
                   android:value="@string/rustore_PayClientSettings_consoleApplicationId" />
        <meta-data android:name="internal_config_key"
                   android:value="@string/rustore_PayClientSettings_internalConfigKey" />
        <meta-data android:name="sdk_pay_scheme_value"
                   android:value="@string/rustore_PayClientSettings_deeplinkScheme" />

        <!-- ✅ Явно укажем Activity для уведомлений (не обязательно, но безопасно) -->
        <meta-data
                android:name="com.unity.notifications.default_notification_open_activity"
                android:value="com.unity3d.player.UnityPlayerActivity" />

    </application>

</manifest>
